{% load custom_filters %}
{% load static %}
<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <base href="{% static '/' %}" />
    <style>
        @font-face {
            font-family: 'Vazir';
            src: url('fonts/Vazir.ttf');
        }
        
        body {
            font-family: 'Vazir', Arial, sans-serif;
            margin: 20px;
            direction: ltr;
            line-height: 1.6;
        }
        
        .header {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .logo {
            width: 100px;
            height: auto;
            float: left;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: right;
        }
        
        th {
            background-color: #f2f2f2;
            font-weight: bold;
        }
        
        .section-title {
            background-color: #808080;
            color: white;
            padding: 5px 10px;
            margin: 20px 0 10px 0;
        }
        
        .checkbox-group {
            margin: 20px 0;
        }
        
        .checkbox-group label {
            display: block;
            margin: 5px 0;
        }
        
        .footer {
            margin-top: 30px;
            font-size: 0.9em;
            border-top: 1px solid #ddd;
            padding-top: 10px;
        }
        
        .request-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        
        .request-box {
            border: 1px solid #000;
            padding: 5px 10px;
            margin: 5px;
        }
    </style>
</head>
<body>
    <div class="header">
        <img src="images/pdf_logo.png" alt="University Logo" class="logo">
        <h2>Initial Request Receipt</h2>
        <h3>Shiraz University of Technology</h3>
    </div>

    <div class="request-info">
        <div class="request-box">
            <span>Request Number: {{ order.order_code }}</span>
        </div>
        <div class="request-box">
            <span>Request Issuance Date: {{ order.created_at|to_jalali }}</span>
        </div>
    </div>

    <div class="section-title">Applicant Information</div>
    <table>
        <tr>
            <th>Full Name:</th>
            <td>{{ order.user.profile.first_name }} {{ order.user.profile.last_name }} </td>
            <th>Phone:</th>
            <td>{{ order.user.profile.phone_number }}</td>
        </tr>
        <tr>
            <th>National ID:</th>
            <td>{{ order.user.profile.national_id }}</td>
            <th>Postal Code:</th>
            <td>{{ order.user.profile.postal_code }}</td>
        </tr>
        <tr>
            <th>Email / Website:</th>
            <td>{{ order.user.email }}</td>
        </tr>
    </table>

    <div class="section-title">Request Details</div>
    <table>
        <tr>
            <th>Row</th>
            <th>Test Name</th>
            <th>Sample Name</th>
            <th>Sample Count</th>
            <th>Parameters</th>
            <th>Repeat Count / Value</th>
            <th>Unit</th>
        </tr>
        {% for test in order.test_info.all %}
        <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ test.test.name_fa }}</td>
            <td>{{ test.sample_name }}</td>
            <td>{{ test.sample_count }}</td>
            <td>{{ test.parameters }}</td>
            <td>{{ test.repeat_count_test }}</td>
            <td>{{ test.unit }}</td>
        </tr>
        {% endfor %}
    </table>

    <p>Request Description: {{ order.description }}</p>

    <div class="checkbox-group">
        <label><input type="checkbox" {% if order.is_faculty %}checked{% endif %}> I am a faculty member of Shiraz University of Technology</label>
        <label><input type="checkbox" {% if order.is_student %}checked{% endif %}> I am a graduate student of Shiraz University of Technology</label>
        <label><input type="checkbox" {% if order.is_staff %}checked{% endif %}> I am a student or staff member of Shiraz University of Technology</label>
        <label><input type="checkbox" {% if order.has_discount %}checked{% endif %}> I am applying for discounts from the central laboratory of the university</label>
    </div>

    <div class="footer">
        <p>Dear applicant, please submit this receipt along with the application form and samples to the admission unit of the laboratory services center of Shiraz University of Technology after initial registration of your request.</p>
        <p>Address: {{ contact.address }}</p>
        <p>Postal Code: {{ contact.postal_code }}</p>
    </div>
</body>
</html>